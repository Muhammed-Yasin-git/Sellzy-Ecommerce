<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Add Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="css/admindash.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Bootstrap JS and Popper.js -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">

    
    <title>Admin Orders</title>
</head>
<body>

    <%- include('include/_adminbase.ejs') %>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Offer Managment</h1>
					<!-- <ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right' ></i></li>
						<li>
							<a class="active" href="#">Home</a>
						</li>
					</ul> -->
				</div>

			</div>


			<div class="container " style="background-color: rgb(233, 230, 221);color: aliceblue;">
				<div class="container-head p-2 text-start">
					<a href="/addCategoryOffer"><button class="btn text-dark"
							style="border-radius: 10px; background-color: #F0EEB3;">Add
							Category Offer</button></a>
					<a href="/addProductOffer"><button class=" btn text-dark " style="background-color: #F0EEB3; border-radius: 10px;">Add
							Product Offer</button></a>
				</div>

				<% for(let i=0;i<offers.length;i++) { %>

					<div class="container-body  bg-white d-flex justify-content-between align-items-center m-2 text-dark"
						style="border-radius: 20px;">
						<div class="product d-flex">
							<div class="product-body m-2">
								<% if(offers[i].pname) { %>
									<p>Offer:<span class="text-danger">
											<%=offers[i].pname %>
										</span></p>
									<% } %>
										<% if(offers[i].category) { %>
											<p>Category:<span class="text-danger">
													<%=offers[i].category %>
												</span></p>
											<% } %>
												<p>Discount:<span class="text-danger">
														<%=offers[i].discount %>
													</span></p>
                                                    <p>Expiry Date:
                                                        <span class="text-danger">
                                                            <%= offers[i].expiredate ? offers[i].expiredate.toLocaleDateString('en-GB') : '' %>
                                                        </span>
                                                    </p>
                                                    
                                                    
							</div>
						</div>
						<div class="product-dtails p-3 d-flex">

							<div class="buttons m-3 text-center">

								<button class="btn d-block m-2 text-white"
									style="width: 100px;background-color:red;border-radius: 10px;color: white;"
									data-bs-toggle="modal" data-bs-target="#deleteModal<%=offers[i]._id %>">Delete
								</button>




								<!-- Delete Modal -->
								<div class="modal fade" id="deleteModal<%=offers[i]._id %>" tabindex="-1"
									aria-labelledby="deleteModalLabel" aria-hidden="true">
									<div class="modal-dialog">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
												<button type="button" class="btn-close" data-bs-dismiss="modal"
													aria-label="Close"></button>
											</div>
											<div class="modal-body">
												<p>Are you sure you want to delete this Offer?</p>
											</div>
											<div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                                <form  action="/delete-adminProductOffer?id=<%=offers[i]._id %>" method="post">
                                                    <button type="submit" class="btn btn-danger">Delete</button>
                                                </form>
                                            </div>
                                            
										</div>
									</div>
								</div>


							</div>
						</div>

					</div>
					<% } %>

			</div>


	</section>


	<!-- CONTENT -->




	<script src="script.js"></script>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
	crossorigin="anonymous"></script>

</html>